<%- include('./partials/header') %>

<div class="w-full min-h-screen bg-gray-200 py-10 px-5">
  <h1 class="text-3xl font-bold text-center mb-8">Your Cart</h1>

  <div class="flex flex-col gap-10">
    <% user.cart.forEach((item)=>{ %>
    <div class="flex flex-col md:flex-row bg-white rounded-lg shadow-md overflow-hidden">
      <!-- Left: Product Image & Info -->
      <div class="md:w-1/3 w-full p-5 bg-[<%= item.bgcolor %>] flex flex-col items-center justify-center">
        <img class="h-52 object-contain" src="data:image/jpeg;base64,<%= item.image.toString('base64') %>" alt="Product Image">
        <div class="w-full mt-5 px-5 py-3 bg-[<%= item.panelcolor %>] flex justify-between items-center text-white">
          <h3 class="text-lg font-semibold">Clinge Bag</h3>
          <div class="flex items-center gap-2">
            <button class="w-7 h-7 bg-white text-black rounded-full flex items-center justify-center transition hover:scale-105"><i class="ri-add-line"></i></button>
            <div class="px-2 py-1 rounded-md bg-white text-black">01</div>
            <button class="w-7 h-7 bg-white text-black rounded-full flex items-center justify-center transition hover:scale-105"><i class="ri-subtract-line"></i></button>
          </div>
        </div>
        <div class="w-full px-5 py-3 bg-[<%= item.textcolor %>] flex justify-between items-center text-white">
          <h4>Net Total</h4>
          <h4>₹ <%= Number(item.price) + 20 - Number(item.discount) %></h4>
        </div>
      </div>

      <!-- Right: Price Breakdown -->
      <div class="md:w-2/3 w-full p-6 flex flex-col gap-4">
        <h3 class="text-xl font-semibold mb-4">Price Breakdown</h3>

        <div class="space-y-3 text-gray-700">
          <div class="flex justify-between">
            <span>Total MRP</span>
            <span>₹ <%= item.price %></span>
          </div>
          <div class="flex justify-between">
            <span>Discount on MRP</span>
            <span>- ₹ <%= item.discount %></span>
          </div>
          <div class="flex justify-between">
            <span>Platform Fee</span>
            <span>+ ₹ 20</span>
          </div>
          <div class="flex justify-between">
            <span>Shipping Fee</span>
            <span class="text-green-600">FREE</span>
          </div>
        </div>

        <hr class="my-4 border-gray-300">

        <div class="flex justify-between items-center text-lg font-semibold">
          <span>Total Amount</span>
          <span class="text-green-700">₹ <%= Number(item.price) + 20 - Number(item.discount) %></span>
        </div>
      </div>
    </div>
    <% }) %>
  </div>
</div>

<%- include('./partials/footer') %>
